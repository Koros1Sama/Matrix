<!DOCTYPE html>
<html lang="ar" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>๐งฎ ุทุฑููุฉ ุฌุงูุณ - ูุนุจุฉ ุชุนููููุฉ</title>
    <meta
      name="description"
      content="ูุนุจุฉ ุชุนููููุฉ ุชูุงุนููุฉ ูุชุนูู ุญู ุฃูุธูุฉ ุงููุนุงุฏูุงุช ุงูุฎุทูุฉ ุจุทุฑููุฉ ุฌุงูุณ"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&family=Fira+Code:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <!-- ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ -->
    <div id="home-screen" class="screen active">
      <div class="container">
        <div class="logo-section">
          <div class="logo-icon">๐งฎ</div>
          <h1 class="title">ุทุฑููุฉ ุฌุงูุณ</h1>
          <p class="subtitle">ุชุนูู ุญู ุงููุนุงุฏูุงุช ุจุทุฑููุฉ ุชูุงุนููุฉ ููุชุนุฉ</p>
        </div>

        <div class="matrix-animation">
          <div class="demo-matrix">
            <div class="demo-row" style="--delay: 0">
              <span class="demo-cell">2</span>
              <span class="demo-cell">1</span>
              <span class="demo-cell">3</span>
              <span class="demo-divider">โ</span>
              <span class="demo-cell">9</span>
            </div>
            <div class="demo-row" style="--delay: 1">
              <span class="demo-cell">1</span>
              <span class="demo-cell">-2</span>
              <span class="demo-cell">1</span>
              <span class="demo-divider">โ</span>
              <span class="demo-cell">3</span>
            </div>
            <div class="demo-row" style="--delay: 2">
              <span class="demo-cell">3</span>
              <span class="demo-cell">1</span>
              <span class="demo-cell">-2</span>
              <span class="demo-divider">โ</span>
              <span class="demo-cell">4</span>
            </div>
          </div>
        </div>

        <div class="menu-buttons">
          <button
            class="btn btn-primary btn-large"
            onclick="game.showLevelSelect()"
          >
            <span class="btn-icon">๐ฎ</span>
            <span>ุงุจุฏุฃ ุงููุนุจ</span>
          </button>
          <button class="btn btn-secondary" onclick="game.showTutorial()">
            <span class="btn-icon">๐</span>
            <span>ููู ุชูุนุจุ</span>
          </button>
        </div>

        <!-- ููุฏ ุงููุชุญ ุงูุณุฑู -->
        <div class="cheat-code-area">
          <input
            type="password"
            id="cheat-code-input"
            class="cheat-code-input"
            placeholder="๐"
            maxlength="3"
            onkeyup="game.checkCheatCode(event)"
          />
        </div>
      </div>
    </div>

    <!-- ุดุงุดุฉ ุงุฎุชูุงุฑ ุงููุณุชูู -->
    <div id="level-select-screen" class="screen">
      <div class="container">
        <div class="screen-header">
          <button class="btn btn-back" onclick="game.showHome()">
            <span>โ</span> ุฑุฌูุน
          </button>
          <h2>ุงุฎุชุฑ ุงููุณุชูู</h2>
        </div>

        <div class="levels-grid" id="levels-grid">
          <!-- ุณูุชู ููุคูุง ุจูุงุณุทุฉ JavaScript -->
        </div>
      </div>
    </div>

    <!-- ุดุงุดุฉ ุงูุดุฑุญ -->
    <div id="tutorial-screen" class="screen">
      <div class="container">
        <div class="screen-header">
          <button class="btn btn-back" onclick="game.showHome()">
            <span>โ</span> ุฑุฌูุน
          </button>
          <h2>ููู ุชูุนุจุ</h2>
        </div>

        <div class="tutorial-content">
          <div class="tutorial-section">
            <h3>๐ฏ ุงููุฏู</h3>
            <p>
              ุญููู ุงููุตูููุฉ ุฅูู ุงูุดูู ุงููุฏุฑุฌู ุงูุตูู (Row Echelon Form) ุซู ุฃูุฌุฏ
              ููู ุงููุชุบูุฑุงุช.
            </p>
          </div>

          <div class="tutorial-section">
            <h3>๐ ุงูุนูููุงุช ุงููุชุงุญุฉ</h3>
            <div class="operations-list">
              <div class="operation-item">
                <div class="op-icon">โ๏ธ</div>
                <div class="op-text">
                  <strong>ุชุจุฏูู ุตููู</strong>
                  <p>ุงุณุญุจ ูุฃููุช ุงูุตููู ูุชุจุฏูููุง</p>
                </div>
              </div>
              <div class="operation-item">
                <div class="op-icon">โ</div>
                <div class="op-text">
                  <strong>ุถุฑุจ ุตู ุจุนุฏุฏ</strong>
                  <p>ุงุถุฑุจ ุฌููุน ุนูุงุตุฑ ุตู ุจุนุฏุฏ (ูููู ุฃู ูููู ูุณุฑุงู)</p>
                </div>
              </div>
              <div class="operation-item">
                <div class="op-icon">โ</div>
                <div class="op-text">
                  <strong>ุฌูุน ุตููู</strong>
                  <p>ุฃุถู ูุถุงุนู ุตู ุฅูู ุตู ุขุฎุฑ</p>
                </div>
              </div>
            </div>
          </div>

          <div class="tutorial-section">
            <h3>โจ ุงูุชูููุญุงุช</h3>
            <ul>
              <li>
                ุงูุนูุงุตุฑ <span class="highlight-green">ุงูุฎุถุฑุงุก</span> ูู ููุงููุง
                ุงูุตุญูุญ
              </li>
              <li>ุงุจุฏุฃ ุจุฌุนู ุงูุนูุตุฑ ุงูุฃูู ูู ุงูุตู ุงูุฃูู = 1</li>
              <li>ุงุฌุนู ุฌููุน ุงูุนูุงุตุฑ ุชุญุช ุงููุงุฆุฏ = 0</li>
            </ul>
          </div>

          <button
            class="btn btn-primary btn-large"
            onclick="game.showLevelSelect()"
          >
            ูููุชุ ููุจุฏุฃ! ๐
          </button>
        </div>
      </div>
    </div>

    <!-- ุดุงุดุฉ ุงูุฏุฑุณ ุงูุชุนูููู (Level 0) -->
    <div id="lesson-screen" class="screen">
      <div class="container">
        <div class="screen-header">
          <button class="btn btn-back" onclick="game.showLevelSelect()">
            <span>โ</span> ุฑุฌูุน
          </button>
          <h2>๐ ุชุนูู ุทุฑููุฉ ุฌุงูุณ</h2>
        </div>

        <div class="lesson-container">
          <!-- ุงูุฎุทูุฉ 1: ูุง ูู ุงูุดูู ุงููุฏุฑุฌูุ -->
          <div class="lesson-step active" id="lesson-step-1">
            <h3 class="lesson-title">ุงูุฎุทูุฉ 1: ูุง ูู ุงูุดูู ุงููุฏุฑุฌู ุงูุตููุ</h3>
            <p class="lesson-desc">
              ูุฏููุง ุชุญููู ุงููุตูููุฉ ุฅูู ุดูู ุฎุงุต ูุณููู ุฅูุฌุงุฏ ููู ุงููุชุบูุฑุงุช:
            </p>

            <div class="lesson-matrix-demo">
              <div class="demo-matrix echelon-form">
                <div class="demo-row">
                  <span class="demo-cell pivot">1</span>
                  <span class="demo-cell">2</span>
                  <span class="demo-cell">3</span>
                  <span class="demo-divider"></span>
                  <span class="demo-cell result">6</span>
                </div>
                <div class="demo-row">
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell pivot">1</span>
                  <span class="demo-cell">-1</span>
                  <span class="demo-divider"></span>
                  <span class="demo-cell result">2</span>
                </div>
                <div class="demo-row">
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell pivot">1</span>
                  <span class="demo-divider"></span>
                  <span class="demo-cell result">3</span>
                </div>
              </div>

              <div class="demo-annotations">
                <div class="annotation pivot-line">
                  <span class="arrow">โ</span>
                  <span>ูู ูุงุฆุฏ ุนูู <strong>ูููู</strong> ุงูุฐู ูุจูู</span>
                </div>
              </div>
            </div>

            <div class="lesson-points">
              <div class="point">
                <span class="point-icon">โ</span>
                <span
                  >ูู <strong>ูุงุฆุฏ</strong> (ุฃูู ุนูุตุฑ ุบูุฑ ุตูุฑู ูู ุงูุตู) =
                  <strong>1</strong></span
                >
              </div>
              <div class="point">
                <span class="point-icon">โ</span>
                <span
                  >ุงููุงุฆุฏ ูู ูู ุตู <strong>ุนูู ูููู</strong> ุงููุงุฆุฏ ุงูุฐู
                  ูููู</span
                >
              </div>
              <div class="point">
                <span class="point-icon">โ</span>
                <span
                  >ูู ุงูุนูุงุตุฑ <strong>ุชุญุช</strong> ุฃู ูุงุฆุฏ =
                  <strong>0</strong></span
                >
              </div>
              <div class="point">
                <span class="point-icon">๐ก</span>
                <span
                  >ุงููุงุฆุฏ <strong>ููุณ ุดุฑุทุงู</strong> ุฃู ูููู ุนูู ุงููุทุฑ
                  ุงูุฑุฆูุณู!</span
                >
              </div>
            </div>
          </div>

          <!-- ุงูุฎุทูุฉ 2: ุงูุนูููุงุช ุงูุฃูููุฉ -->
          <div class="lesson-step" id="lesson-step-2">
            <h3 class="lesson-title">ุงูุฎุทูุฉ 2: ุงูุนูููุงุช ุงููุณููุญุฉ</h3>
            <p class="lesson-desc">
              ููููู ุงุณุชุฎุฏุงู 3 ุนูููุงุช ููุท ูููุตูู ููุดูู ุงููุฏุฑุฌู:
            </p>

            <div class="operations-demo">
              <div class="op-demo-item">
                <div class="op-demo-icon">โ๏ธ</div>
                <div class="op-demo-content">
                  <strong>ุชุจุฏูู ุตููู</strong>
                  <div class="op-demo-example">Rโ โ Rโ</div>
                </div>
              </div>

              <div class="op-demo-item">
                <div class="op-demo-icon">โ</div>
                <div class="op-demo-content">
                  <strong>ุถุฑุจ ุตู ุจุนุฏุฏ โ 0</strong>
                  <div class="op-demo-example">Rโ โ ยฝ ร Rโ</div>
                </div>
              </div>

              <div class="op-demo-item">
                <div class="op-demo-icon">โ</div>
                <div class="op-demo-content">
                  <strong>ุฌูุน ูุถุงุนู ุตู ูุขุฎุฑ</strong>
                  <div class="op-demo-example">Rโ โ Rโ + (-3) ร Rโ</div>
                </div>
              </div>
            </div>

            <div class="lesson-tip">
              ๐ก <strong>ูุตูุญุฉ:</strong> ุงุจุฏุฃ ุฏุงุฆูุงู ุจุฌุนู ุงููุงุฆุฏ ุงูุฃูู = 1ุ ุซู
              ุงุฌุนู ูุง ุชุญุชู = 0
            </div>
          </div>

          <!-- ุงูุฎุทูุฉ 3: ุญุงูุฉ ุงูุญู ุงููุญูุฏ -->
          <div class="lesson-step" id="lesson-step-3">
            <h3 class="lesson-title">ุงูุฎุทูุฉ 3: ุญุงูุฉ ุงูุญู ุงููุญูุฏ โ</h3>
            <p class="lesson-desc">
              ุนูุฏูุง ูููู ููู ูุชุบูุฑ ูุงุฆุฏ ุฎุงุต ุจูุ ููุฌุฏ <strong>ุญู ูุญูุฏ</strong>:
            </p>

            <div class="lesson-matrix-demo">
              <div class="demo-matrix unique-solution">
                <div class="demo-row">
                  <span class="demo-cell pivot">1</span>
                  <span class="demo-cell">2</span>
                  <span class="demo-cell">1</span>
                  <span class="demo-divider"></span>
                  <span class="demo-cell result">9</span>
                </div>
                <div class="demo-row">
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell pivot">1</span>
                  <span class="demo-cell">-1</span>
                  <span class="demo-divider"></span>
                  <span class="demo-cell result">1</span>
                </div>
                <div class="demo-row">
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell pivot">1</span>
                  <span class="demo-divider"></span>
                  <span class="demo-cell result">3</span>
                </div>
              </div>
            </div>

            <div class="solution-box success">
              <div class="solution-icon">โ</div>
              <div class="solution-content">
                <strong>ุงูุญู:</strong>
                <div class="solution-vars">
                  <span>z = 3</span>
                  <span>y = 1 + z = 4</span>
                  <span>x = 9 - 2y - z = -2</span>
                </div>
              </div>
            </div>
          </div>

          <!-- ุงูุฎุทูุฉ 4: ูุง ููุงุฆู ูู ุงูุญููู -->
          <div class="lesson-step" id="lesson-step-4">
            <h3 class="lesson-title">ุงูุฎุทูุฉ 4: ูุง ููุงุฆู ูู ุงูุญููู โพ๏ธ</h3>
            <p class="lesson-desc">
              ุฅุฐุง ูุงู ุงูุตู ุงูุฃุฎูุฑ <strong>ููู ุฃุตูุงุฑ</strong> (ุจูุง ููู ุงููุงุชุฌ):
            </p>

            <div class="lesson-matrix-demo">
              <div class="demo-matrix infinite-solution">
                <div class="demo-row">
                  <span class="demo-cell pivot">1</span>
                  <span class="demo-cell">2</span>
                  <span class="demo-cell">1</span>
                  <span class="demo-divider"></span>
                  <span class="demo-cell result">5</span>
                </div>
                <div class="demo-row">
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell pivot">1</span>
                  <span class="demo-cell">3</span>
                  <span class="demo-divider"></span>
                  <span class="demo-cell result">2</span>
                </div>
                <div class="demo-row warning-row">
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell zero">0</span>
                  <span class="demo-divider"></span>
                  <span class="demo-cell zero">0</span>
                </div>
              </div>
            </div>

            <div class="solution-box warning">
              <div class="solution-icon">โพ๏ธ</div>
              <div class="solution-content">
                <strong>ูุนูู ุฐูู:</strong>
                <p>
                  ุฃุญุฏ ุงููุนุงุฏูุงุช ูุชูุฑุฑุฉ (ุฃู ุชุงุจุนุฉ). ุงููุชุบูุฑ z ุญุฑ ูููู ุฃู ูุฃุฎุฐ ุฃู
                  ูููุฉ!
                </p>
                <div class="solution-vars">
                  <span>z = t (ุฃู ุนุฏุฏ)</span>
                  <span>y = 2 - 3t</span>
                  <span>x = 5 - 2y - z = 1 + 5t</span>
                </div>
              </div>
            </div>
          </div>

          <!-- ุงูุฎุทูุฉ 5: ูุง ููุฌุฏ ุญู -->
          <div class="lesson-step" id="lesson-step-5">
            <h3 class="lesson-title">ุงูุฎุทูุฉ 5: ูุง ููุฌุฏ ุญู โ</h3>
            <p class="lesson-desc">
              ุฅุฐุง ูุงู ุงูุตู ุงูุฃุฎูุฑ <strong>ุฃุตูุงุฑ ูุง ุนุฏุง ุงููุงุชุฌ</strong>:
            </p>

            <div class="lesson-matrix-demo">
              <div class="demo-matrix no-solution">
                <div class="demo-row">
                  <span class="demo-cell pivot">1</span>
                  <span class="demo-cell">2</span>
                  <span class="demo-cell">1</span>
                  <span class="demo-divider"></span>
                  <span class="demo-cell result">5</span>
                </div>
                <div class="demo-row">
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell pivot">1</span>
                  <span class="demo-cell">3</span>
                  <span class="demo-divider"></span>
                  <span class="demo-cell result">2</span>
                </div>
                <div class="demo-row error-row">
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell zero">0</span>
                  <span class="demo-divider"></span>
                  <span class="demo-cell error">5</span>
                </div>
              </div>
            </div>

            <div class="solution-box error">
              <div class="solution-icon">โ</div>
              <div class="solution-content">
                <strong>ูุนูู ุฐูู:</strong>
                <p>ุงูุตู ุงูุฃุฎูุฑ ูููู: <code>0 = 5</code> ููุฐุง ูุณุชุญูู!</p>
                <p>ุงููุนุงุฏูุงุช ูุชูุงูุถุฉุ ูุง ููุฌุฏ ุญู ูุญูู ุฌููุนูุง.</p>
              </div>
            </div>
          </div>

          <!-- ุงูุฎุทูุฉ 6: ุดุงูุฏ ุงูุญู ุฎุทูุฉ ุจุฎุทูุฉ -->
          <div class="lesson-step" id="lesson-step-6">
            <h3 class="lesson-title">ุงูุฎุทูุฉ 6: ๐ฝ๏ธ ุดุงูุฏ ุงูุญู ุฎุทูุฉ ุจุฎุทูุฉ</h3>
            <p class="lesson-desc">ุชุงุจุน ููู ูุญู ูุฐู ุงููุตูููุฉ ุจุงูุชูุตูู:</p>

            <div class="animated-example-container">
              <!-- ุงููุตูููุฉ ุนูู ุงููุณุงุฑ -->
              <div class="example-matrix-side">
                <div class="example-step active" id="example-step-0">
                  <div class="demo-matrix">
                    <div class="demo-row">
                      <span class="demo-cell highlight">2</span>
                      <span class="demo-cell">4</span>
                      <span class="demo-divider"></span>
                      <span class="demo-cell result">10</span>
                    </div>
                    <div class="demo-row">
                      <span class="demo-cell">1</span>
                      <span class="demo-cell">3</span>
                      <span class="demo-divider"></span>
                      <span class="demo-cell result">7</span>
                    </div>
                  </div>
                </div>

                <div class="example-step" id="example-step-1">
                  <div class="demo-matrix">
                    <div class="demo-row changed">
                      <span class="demo-cell pivot">1</span>
                      <span class="demo-cell">2</span>
                      <span class="demo-divider"></span>
                      <span class="demo-cell result">5</span>
                    </div>
                    <div class="demo-row">
                      <span class="demo-cell">1</span>
                      <span class="demo-cell">3</span>
                      <span class="demo-divider"></span>
                      <span class="demo-cell result">7</span>
                    </div>
                  </div>
                </div>

                <div class="example-step" id="example-step-2">
                  <div class="demo-matrix">
                    <div class="demo-row">
                      <span class="demo-cell pivot">1</span>
                      <span class="demo-cell">2</span>
                      <span class="demo-divider"></span>
                      <span class="demo-cell result">5</span>
                    </div>
                    <div class="demo-row changed">
                      <span class="demo-cell zero">0</span>
                      <span class="demo-cell highlight">1</span>
                      <span class="demo-divider"></span>
                      <span class="demo-cell result">2</span>
                    </div>
                  </div>
                </div>

                <div class="example-step" id="example-step-3">
                  <div class="demo-matrix success-matrix">
                    <div class="demo-row">
                      <span class="demo-cell pivot">1</span>
                      <span class="demo-cell">2</span>
                      <span class="demo-divider"></span>
                      <span class="demo-cell result">5</span>
                    </div>
                    <div class="demo-row">
                      <span class="demo-cell zero">0</span>
                      <span class="demo-cell pivot">1</span>
                      <span class="demo-divider"></span>
                      <span class="demo-cell result">2</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- ุงูุดุฑุญ ุนูู ุงููููู -->
              <div class="example-explanation-side">
                <div class="explanation-step active" id="explanation-step-0">
                  <div class="step-number">ุงูุจุฏุงูุฉ</div>
                  <div class="step-title">ุงููุตูููุฉ ุงูุฃุตููุฉ</div>
                  <div class="step-detail">
                    <p>ูุฐู ุงููุตูููุฉ ุชูุซู ูุธุงู ูุนุงุฏูุชูู:</p>
                    <code>2x + 4y = 10</code>
                    <code>x + 3y = 7</code>
                  </div>
                </div>

                <div class="explanation-step" id="explanation-step-1">
                  <div class="step-number">ุงูุฎุทูุฉ 1</div>
                  <div class="step-title">Rโ โ ยฝ ร Rโ</div>
                  <div class="step-detail">
                    <p>ูุถุฑุจ ุงูุตู ุงูุฃูู ูู <strong>ยฝ</strong></p>
                    <p class="step-reason">๐ฏ ุงููุฏู: ุฌุนู ุงููุงุฆุฏ = 1</p>
                    <div class="step-calc">[2, 4 | 10] ร ยฝ = [1, 2 | 5]</div>
                  </div>
                </div>

                <div class="explanation-step" id="explanation-step-2">
                  <div class="step-number">ุงูุฎุทูุฉ 2</div>
                  <div class="step-title">Rโ โ Rโ + (-1)รRโ</div>
                  <div class="step-detail">
                    <p>ูุทุฑุญ ุงูุตู ุงูุฃูู ูู ุงูุซุงูู</p>
                    <p class="step-reason">๐ฏ ุงููุฏู: ุฌุนู ูุง ุชุญุช ุงููุงุฆุฏ = 0</p>
                    <div class="step-calc">
                      [1, 3 | 7] - [1, 2 | 5] = [0, 1 | 2]
                    </div>
                  </div>
                </div>

                <div class="explanation-step" id="explanation-step-3">
                  <div class="step-number">๐ ุชู!</div>
                  <div class="step-title">ุงูุดูู ุงููุฏุฑุฌู</div>
                  <div class="step-detail">
                    <p>ุงูุขู ูุญู ุจุงูุชุนููุถ ุงูุนูุณู:</p>
                    <div class="final-solution">
                      <span class="sol-item"
                        >ูู Rโ: <strong>y = 2</strong></span
                      >
                      <span class="sol-item">ูู Rโ: x + 2(2) = 5</span>
                      <span class="sol-item sol-final"
                        >โด <strong>x = 1</strong>, <strong>y = 2</strong></span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- ุดุฑูุท ุงูุชุญูู -->
            <!-- ุฃุฒุฑุงุฑ ุงูุชุญูู ูู ุงููุซุงู -->
            <div class="example-simple-nav">
              <button
                class="btn btn-control"
                id="btn-prev-example"
                onclick="game.prevExampleStep()"
                disabled
              >
                โ ุงูุฎุทูุฉ ุงูุณุงุจูุฉ
              </button>
              <span class="example-counter" id="example-counter"
                >ุฎุทูุฉ 1 ูู 4</span
              >
              <button
                class="btn btn-control"
                id="btn-next-example"
                onclick="game.nextExampleStep()"
              >
                ุงูุฎุทูุฉ ุงูุชุงููุฉ โถ
              </button>
            </div>
          </div>

          <!-- ุงูุฎุทูุฉ 7: ุงููุงุฆุฏ ููุณ ุฏุงุฆูุงู ุนูู ุงููุทุฑ -->
          <div class="lesson-step" id="lesson-step-7">
            <h3 class="lesson-title">ุงูุฎุทูุฉ 7: ๐ก ุญุงูุงุช ุฎุงุตุฉ ูููุงุฏุฉ</h3>
            <p class="lesson-desc">
              ุงููุงุฆุฏ ูููู ุฃู ูููู ูู ุฃู ุนููุฏุ ููุณ ุจุงูุถุฑูุฑุฉ ุนูู ุงููุทุฑ:
            </p>

            <div class="lesson-matrix-demo">
              <div class="demo-matrix">
                <div class="demo-row">
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell pivot">1</span>
                  <span class="demo-cell">2</span>
                  <span class="demo-cell">3</span>
                  <span class="demo-divider"></span>
                  <span class="demo-cell result">5</span>
                </div>
                <div class="demo-row">
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell pivot">1</span>
                  <span class="demo-divider"></span>
                  <span class="demo-cell result">3</span>
                </div>
                <div class="demo-row">
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell zero">0</span>
                  <span class="demo-cell zero">0</span>
                  <span class="demo-divider"></span>
                  <span class="demo-cell zero">0</span>
                </div>
              </div>
            </div>

            <div class="lesson-points">
              <div class="point">
                <span class="point-icon">โ</span>
                <span>ูุฐุง ุดูู ูุฏุฑุฌู ุตุญูุญ! ุงููุงุฏุฉ ูู ุงูุฃุนูุฏุฉ 2 ู 4</span>
              </div>
              <div class="point">
                <span class="point-icon">โพ๏ธ</span>
                <span>ุงูุตู ุงูุตูุฑู ูุนูู: ูุชุบูุฑุงุช ุญุฑุฉ = ูุง ููุงุฆู ูู ุงูุญููู</span>
              </div>
              <div class="point">
                <span class="point-icon">๐ฏ</span>
                <span>ุงูููู: ูู ูุงุฆุฏ ุนูู <strong>ูููู</strong> ุงูุฐู ูุจูู</span>
              </div>
            </div>
          </div>

          <!-- ุฃุฒุฑุงุฑ ุงูุชููู -->
          <div class="lesson-navigation">
            <button
              class="btn btn-nav"
              id="btn-prev-lesson"
              onclick="game.prevLesson()"
              disabled
            >
              โ ุงูุณุงุจู
            </button>

            <div class="lesson-dots" id="lesson-dots">
              <span class="dot active" onclick="game.goToLesson(1)"></span>
              <span class="dot" onclick="game.goToLesson(2)"></span>
              <span class="dot" onclick="game.goToLesson(3)"></span>
              <span class="dot" onclick="game.goToLesson(4)"></span>
              <span class="dot" onclick="game.goToLesson(5)"></span>
              <span class="dot" onclick="game.goToLesson(6)"></span>
              <span class="dot" onclick="game.goToLesson(7)"></span>
            </div>

            <button
              class="btn btn-nav btn-primary"
              id="btn-next-lesson"
              onclick="game.nextLesson()"
            >
              ุงูุชุงูู โถ
            </button>
          </div>

          <!-- ุฒุฑ ุงูุจุฏุก (ูุธูุฑ ูู ุขุฎุฑ ุฎุทูุฉ) -->
          <button
            class="btn btn-primary btn-large btn-start-game"
            id="btn-start-after-lesson"
            onclick="game.showLevelSelect()"
            style="display: none"
          >
            ๐ฎ ุงุจุฏุฃ ุงููุนุจ ุงูุขู!
          </button>
        </div>
      </div>
    </div>

    <!-- ุดุงุดุฉ ุงููุนุจ -->
    <div id="game-screen" class="screen">
      <div class="container">
        <!-- ุงูุดุฑูุท ุงูุนููู -->
        <div class="game-header">
          <button class="btn btn-back" onclick="game.confirmExit()">
            <span>โ</span> ุฎุฑูุฌ
          </button>
          <div class="game-stats">
            <div class="stat">
              <span class="stat-label">ุงููุณุชูู</span>
              <span class="stat-value" id="current-level">1</span>
            </div>
            <div class="stat">
              <span class="stat-label">ุงูููุงุท</span>
              <span class="stat-value" id="current-score">0</span>
            </div>
            <div class="stat">
              <span class="stat-label">ุงูุฎุทูุงุช</span>
              <span class="stat-value" id="current-steps">0</span>
            </div>
          </div>
        </div>

        <!-- ูุคุดุฑ ุงููุฑุญูุฉ -->
        <div class="phase-indicator">
          <div class="phase" id="phase-2-indicator">
            <span class="phase-num">2</span>
            <span class="phase-text">ุฅูุฌุงุฏ ุงููุชุบูุฑุงุช</span>
          </div>
          <div class="phase-arrow">โ</div>
          <div class="phase active" id="phase-1-indicator">
            <span class="phase-num">1</span>
            <span class="phase-text">ุงูุดูู ุงููุฏุฑุฌู</span>
          </div>
        </div>

        <!-- ูุธุงู ุงููุนุงุฏูุงุช -->
        <div class="equations-section" id="equations-section">
          <h3>๐ ูุธุงู ุงููุนุงุฏูุงุช:</h3>
          <div class="equations-box" id="equations-display">
            <!-- ุณูุชู ููุคูุง ุจูุงุณุทุฉ JavaScript -->
          </div>
        </div>

        <!-- ุงููุฑุญูุฉ ุงูุฃููู: ุงููุตูููุฉ -->
        <div id="phase-1" class="game-phase active">
          <!-- ูุณู ุงููุนูู ุงููุณุงุนุฏ -->
          <div class="tutor-section" id="tutor-section" style="display: none">
            <div class="tutor-header">
              <span class="tutor-icon">๐ก</span>
              <span class="tutor-title">ูุนูู ุงููุตูููุงุช</span>
              <button
                class="tutor-close"
                onclick="game.hideTutor()"
                title="ุฅุฎูุงุก"
              >
                &times;
              </button>
            </div>
            <div class="tutor-body">
              <p class="tutor-hint" id="tutor-hint-text">
                ูุฑุญุจุงู! ุณุฃุณุงุนุฏู ูู ุญู ุงููุตูููุฉ.
              </p>
            </div>
            <div class="tutor-actions">
              <button
                class="btn btn-tutor-apply"
                id="btn-apply-hint"
                onclick="game.applyTutorHint()"
                style="display: none"
              >
                โ ุชุทุจูู ุงูุชูููุญ
              </button>
            </div>
          </div>

          <div class="matrix-section">
            <h3>๐ข ุงููุตูููุฉ ุงูููุณุนุฉ:</h3>
            <div class="matrix-container" id="matrix-container">
              <!-- ุณูุชู ููุคูุง ุจูุงุณุทุฉ JavaScript -->
            </div>
          </div>

          <!-- ุฃุฒุฑุงุฑ ุงูุนูููุงุช -->
          <div class="operations-bar">
            <button
              class="btn btn-operation"
              id="btn-scale"
              onclick="game.showScaleModal()"
            >
              <span class="op-icon">โ</span>
              <span>ุถุฑุจ ุตู</span>
            </button>
            <button
              class="btn btn-operation"
              id="btn-add"
              onclick="game.showAddModal()"
            >
              <span class="op-icon">โ</span>
              <span>ุฌูุน ุตููู</span>
            </button>
            <button
              class="btn btn-undo"
              id="btn-undo"
              onclick="game.undo()"
              disabled
            >
              <span class="op-icon">โฉ๏ธ</span>
              <span>ุชุฑุงุฌุน</span>
            </button>
            <button
              class="btn btn-hint"
              id="btn-show-hint"
              onclick="game.toggleTutor()"
              style="display: none"
            >
              <span class="op-icon">๐ก</span>
              <span>ุชูููุญ</span>
            </button>
          </div>
        </div>

        <!-- ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุงูุชุนููุถ ุงูุนูุณู -->
        <div id="phase-2" class="game-phase">
          <div class="substitution-section">
            <h3>๐งฉ ุฃูุฌุฏ ููู ุงููุชุบูุฑุงุช:</h3>
            <div class="final-matrix" id="final-matrix">
              <!-- ุงููุตูููุฉ ุงูููุงุฆูุฉ -->
            </div>
            <div class="final-equations-section">
              <h4>๐ ุงููุนุงุฏูุงุช ุงููุงุชุฌุฉ:</h4>
              <div
                class="equations-box final-equations"
                id="final-equations-display"
              >
                <!-- ุงููุนุงุฏูุงุช ุงููุงุชุฌุฉ -->
              </div>
            </div>
            <div class="variables-form" id="variables-form">
              <!-- ุญููู ุฅุฏุฎุงู ุงููุชุบูุฑุงุช -->
            </div>
            <button
              class="btn btn-primary btn-large"
              onclick="game.checkVariables()"
            >
              โ ุชุญูู ูู ุงูุฅุฌุงุจุฉ
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- ุดุงุดุฉ ุงูููุฒ -->
    <div id="win-screen" class="screen">
      <div class="container">
        <div class="win-content">
          <div class="win-icon">๐</div>
          <h2>ุฃุญุณูุช!</h2>
          <p class="win-message" id="win-message">ููุฏ ุฃูููุช ุงููุณุชูู ุจูุฌุงุญ</p>

          <div class="win-stats">
            <div class="win-stat">
              <span class="win-stat-value" id="final-score">0</span>
              <span class="win-stat-label">ุงูููุงุท</span>
            </div>
            <div class="win-stat">
              <span class="win-stat-value" id="final-steps">0</span>
              <span class="win-stat-label">ุงูุฎุทูุงุช</span>
            </div>
          </div>

          <div class="win-stars" id="win-stars">โญโญโญ</div>

          <!-- ููุงุนุฏ ุงูุชูููู -->
          <div class="scoring-rules" id="scoring-rules">
            <div class="rule-title">ููุงุนุฏ ุงูุชูููู:</div>
            <div class="rule-item">
              โญโญโญ <span id="rule-3-stars">โค 3 ุฎุทูุงุช</span>
            </div>
            <div class="rule-item">
              โญโญโ <span id="rule-2-stars">โค 4 ุฎุทูุงุช</span>
            </div>
            <div class="rule-item">
              โญโโ <span id="rule-1-star">ุฅููุงู ุงููุณุชูู</span>
            </div>
          </div>

          <div class="win-buttons">
            <button class="btn btn-secondary" onclick="game.showLevelSelect()">
              ุงุฎุชุฑ ูุณุชูู ุขุฎุฑ
            </button>
            <button class="btn btn-primary" onclick="game.nextLevel()">
              ุงููุณุชูู ุงูุชุงูู โ
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- ูุงูุฐุฉ ุถุฑุจ ุตู -->
    <div id="scale-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>โ ุถุฑุจ ุตู ุจุนุฏุฏ</h3>
          <button class="modal-close" onclick="game.closeModals()">ร</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>ุงุฎุชุฑ ุงูุตู:</label>
            <select id="scale-row" class="form-select">
              <!-- ุณูุชู ููุคูุง ุจูุงุณุทุฉ JavaScript -->
            </select>
          </div>

          <!-- ุนุฑุถ ููู ุงูุตู ุงูุญุงููุฉ -->
          <div class="scale-row-preview">
            <div class="preview-label">ุงูุตู ุงูุญุงูู:</div>
            <div class="preview-row" id="scale-current-row">[ 1, 2, | 5 ]</div>
          </div>

          <div class="form-group">
            <label>ุงุถุฑุจ ูู k:</label>
            <div class="fraction-input-vertical">
              <input
                type="number"
                id="scale-num"
                class="form-input frac-input-num"
                value="1"
                data-prev="1"
                placeholder="ุงูุจุณุท"
                oninput="if(this.value==0){this.value=parseInt(this.dataset.prev)<0?1:-1;} this.dataset.prev=this.value; game.updateScalePreview();"
                onkeydown="if(event.key==='Enter'){event.preventDefault(); document.getElementById('scale-den').focus();}"
              />
              <div class="frac-input-line"></div>
              <input
                type="number"
                id="scale-den"
                class="form-input frac-input-den"
                value="1"
                min="1"
                placeholder="ุงูููุงู"
                onchange="if(this.value<1) this.value=1; game.updateScalePreview();"
                onkeydown="if(event.key==='Enter'){event.preventDefault(); game.executeScale();}"
              />
            </div>
            <div class="fraction-preview" id="scale-preview">k = 1</div>
          </div>

          <!-- ูุนุงููุฉ ุงููุชูุฌุฉ -->
          <div class="result-preview">
            <div class="preview-label">ุงููุชูุฌุฉ:</div>
            <div class="preview-row" id="scale-operation-preview">
              [ 1, 2, | 5 ]
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" onclick="game.closeModals()">
            ุฅูุบุงุก
          </button>
          <button class="btn btn-primary" onclick="game.executeScale()">
            ุชูููุฐ
          </button>
        </div>
      </div>
    </div>

    <!-- ูุงูุฐุฉ ุฌูุน ุตููู - ูุจุณุทุฉ -->
    <div id="add-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>โ ุฌูุน ุตููู</h3>
          <button class="modal-close" onclick="game.closeModals()">ร</button>
        </div>
        <div class="modal-body">
          <!-- ุนุฑุถ ููู ุงูุตููู ุงููุนููุฉ -->
          <div class="rows-preview">
            <div class="row-preview-item" id="target-row-preview">
              <span class="row-preview-label">R1:</span>
              <span class="row-preview-values" id="target-row-values"
                >[ 1, 2 | 5 ]</span
              >
            </div>
            <div class="row-preview-item" id="source-row-preview">
              <span class="row-preview-label">R2:</span>
              <span class="row-preview-values" id="source-row-values"
                >[ 2, 1 | 4 ]</span
              >
            </div>
          </div>

          <!-- ุตูุบุฉ ุงูุนูููุฉ ุงููุงุถุญุฉ -->
          <div class="operation-formula">
            <div class="formula-box">
              <select id="add-target" class="inline-select"></select>
              <span class="formula-symbol">โ</span>
              <span class="formula-text" id="formula-target-text">R1</span>
              <span class="formula-symbol">+</span>
              <span class="formula-bracket">(</span>
              <div class="inline-frac-vertical">
                <input
                  type="number"
                  id="add-num"
                  class="inline-input frac-input-num"
                  value="-1"
                  data-prev="-1"
                  oninput="if(this.value==0){this.value=parseInt(this.dataset.prev)<0?1:-1;} this.dataset.prev=this.value; game.updateAddPreview();"
                  onkeydown="if(event.key==='Enter'){event.preventDefault(); document.getElementById('add-den').focus();}"
                />
                <div class="frac-input-line-small"></div>
                <input
                  type="number"
                  id="add-den"
                  class="inline-input frac-input-den"
                  value="1"
                  min="1"
                  onchange="if(this.value<1) this.value=1; game.updateAddPreview();"
                  onkeydown="if(event.key==='Enter'){event.preventDefault(); game.executeAdd();}"
                />
              </div>
              <span class="formula-bracket">)</span>
              <span class="formula-symbol">ร</span>
              <select id="add-source" class="inline-select"></select>
            </div>
          </div>

          <!-- ุดุฑุญ ูุจุณุท -->
          <div class="operation-explain">
            <p id="operation-explain-text">
              ุณูุชู ุฅุถุงูุฉ <strong>-1</strong> ูุถุฑูุจ ูู <strong>R2</strong> ุฅูู
              <strong>R1</strong>
            </p>
          </div>

          <!-- ูุนุงููุฉ ุงููุชูุฌุฉ -->
          <div class="result-preview">
            <div class="preview-label">ุงููุชูุฌุฉ:</div>
            <div class="preview-row" id="add-operation-preview">
              <!-- ุณูุชู ููุคูุง ุจูุงุณุทุฉ JavaScript -->
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" onclick="game.closeModals()">
            ุฅูุบุงุก
          </button>
          <button class="btn btn-primary" onclick="game.executeAdd()">
            ุชูููุฐ
          </button>
        </div>
      </div>
    </div>

    <!-- ูุงูุฐุฉ ุชุฃููุฏ ุงูุฎุฑูุฌ -->
    <div id="confirm-modal" class="modal">
      <div class="modal-content modal-small">
        <div class="modal-header">
          <h3>โ๏ธ ุชุฃููุฏ ุงูุฎุฑูุฌ</h3>
        </div>
        <div class="modal-body">
          <p>ูู ุฃูุช ูุชุฃูุฏ ูู ุงูุฎุฑูุฌุ ุณูุชู ููุฏุงู ุชูุฏูู ูู ูุฐุง ุงููุณุชูู.</p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" onclick="game.closeModals()">
            ุงูุจูุงุก
          </button>
          <button class="btn btn-danger" onclick="game.exitToLevelSelect()">
            ุฎุฑูุฌ
          </button>
        </div>
      </div>
    </div>

    <script src="js/matrix.js"></script>
    <script src="js/levels.js"></script>
    <script src="js/dragdrop.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
